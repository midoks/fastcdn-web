var Qe=Object.defineProperty,Ze=Object.defineProperties;var Ge=Object.getOwnPropertyDescriptors;var ae=Object.getOwnPropertySymbols;var Ce=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable;var re=(s,t,o)=>t in s?Qe(s,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[t]=o,y=(s,t)=>{for(var o in t||(t={}))Ce.call(t,o)&&re(s,o,t[o]);if(ae)for(var o of ae(t))Be.call(t,o)&&re(s,o,t[o]);return s},F=(s,t)=>Ze(s,Ge(t));var U=(s,t)=>{var o={};for(var a in s)Ce.call(s,a)&&t.indexOf(a)<0&&(o[a]=s[a]);if(s!=null&&ae)for(var a of ae(s))t.indexOf(a)<0&&Be.call(s,a)&&(o[a]=s[a]);return o};var W=(s,t,o)=>re(s,typeof t!="symbol"?t+"":t,o);var K=(s,t,o)=>new Promise((a,l)=>{var i=m=>{try{B(o.next(m))}catch(d){l(d)}},p=m=>{try{B(o.throw(m))}catch(d){l(d)}},B=m=>m.done?a(m.value):Promise.resolve(m.value).then(i,p);B((o=o.apply(s,t)).next())});import{d as A,D as h,l as f,s as e,N as et,O as tt,B as v,v as C,b as De,k as de,c as z,g as M,A as X,m as _,y as ot,q as R,t as D,P as ue,r as Ae,j as st,W as at,f as nt,aa as ie,ab as lt,w as rt,Y as it,n as dt,C as J,x as Q,I as ke,z as ce,Q as Te,ac as ut,ad as ct,h as _e}from"./index-index-CGxb6KVd.js";import{b as pe,a0 as $e,aR as pt,aS as ft,aT as mt,aP as yt,aU as ht,aV as vt,ax as Ee,aW as gt,aX as bt,aY as Ct,aZ as Bt,a_ as kt,a$ as _t,b0 as wt,b1 as Ot,b2 as xt,b3 as Mt,aQ as Dt,g as we,b4 as At,b5 as Tt}from"./bootstrap-BO7TQOOQ.js";const $t=pe("expand",[["path",{d:"m15 15 6 6",key:"1s409w"}],["path",{d:"m15 9 6-6",key:"ko1vev"}],["path",{d:"M21 16v5h-5",key:"1ck2sf"}],["path",{d:"M21 8V3h-5",key:"1qoq8a"}],["path",{d:"M3 16v5h5",key:"1t08am"}],["path",{d:"m3 21 6-6",key:"wwnumi"}],["path",{d:"M3 8V3h5",key:"1ln10m"}],["path",{d:"M9 9 3 3",key:"v551iv"}]]);const Et=pe("shrink",[["path",{d:"m15 15 6 6m-6-6v4.8m0-4.8h4.8",key:"17vawe"}],["path",{d:"M9 19.8V15m0 0H4.2M9 15l-6 6",key:"chjx8e"}],["path",{d:"M15 4.2V9m0 0h4.8M15 9l6-6",key:"lav6yq"}],["path",{d:"M9 4.2V9m0 0H4.2M9 9 3 3",key:"1pxi2q"}]]);const St=pe("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),It=A({__name:"Dialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(s,{emit:t}){const l=$e(s,t);return(i,p)=>(f(),h(e(pt),et(tt(e(l))),{default:v(()=>[C(i.$slots,"default")]),_:3},16))}}),Pt=["data-dismissable-modal"],Lt=A({__name:"DialogOverlay",setup(s){ft();const t=De("DISMISSABLE_MODAL_ID");return(o,a)=>(f(),de("div",{"data-dismissable-modal":e(t),class:"bg-overlay z-popup inset-0"},null,8,Pt))}}),zt=A({__name:"DialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},animationType:{default:"slide"},appendTo:{default:"body"},class:{},closeClass:{},closeDisabled:{type:Boolean,default:!1},modal:{type:Boolean},open:{type:Boolean},overlayBlur:{},showClose:{type:Boolean,default:!0},zIndex:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus","close","closed","opened"],setup(s,{expose:t,emit:o}){const a=s,l=o,i=z(()=>{const $=a,{class:r,modal:u,open:g,showClose:k,animationType:w}=$;return U($,["class","modal","open","showClose","animationType"])});function p(){return a.appendTo==="body"||a.appendTo===document.body||!a.appendTo}const B=z(()=>p()?"fixed":"absolute"),m=$e(i,l),d=M(null);function c(r){var u;r.target===((u=d.value)==null?void 0:u.$el)&&(a.open?l("opened"):l("closed"))}return t({getContentRef:()=>d.value}),(r,u)=>(f(),h(e(mt),{to:r.appendTo},{default:v(()=>[X(yt,{name:"fade"},{default:v(()=>[r.open&&r.modal?(f(),h(Lt,{key:0,style:ot(F(y({},r.zIndex?{zIndex:r.zIndex}:{}),{position:B.value,backdropFilter:r.overlayBlur&&r.overlayBlur>0?`blur(${r.overlayBlur}px)`:"none"})),onClick:u[0]||(u[0]=()=>l("close"))},null,8,["style"])):_("",!0)]),_:1}),X(e(vt),ue({ref_key:"contentRef",ref:d,style:F(y({},r.zIndex?{zIndex:r.zIndex}:{}),{position:B.value}),onAnimationend:c},e(m),{class:e(D)("z-popup bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 w-full p-6 shadow-lg outline-none sm:rounded-xl",{"data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-top-[48%]":r.animationType==="slide"},a.class)}),{default:v(()=>[C(r.$slots,"default"),r.showClose?(f(),h(e(ht),{key:0,disabled:r.closeDisabled,class:R(e(D)("data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:bg-accent hover:text-accent-foreground text-foreground/80 flex-center absolute right-3 top-3 h-6 w-6 rounded-full px-1 text-lg opacity-70 transition-opacity hover:opacity-100 focus:outline-none disabled:pointer-events-none",a.closeClass)),onClick:u[1]||(u[1]=()=>l("close"))},{default:v(()=>[X(e(St),{class:"h-4 w-4"})]),_:1},8,["disabled","class"])):_("",!0)]),_:3},16,["style","class"])]),_:3},8,["to"]))}}),Oe=A({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(s){const t=s,o=z(()=>{const p=t,{class:l}=p;return U(p,["class"])}),a=Ee(o);return(l,i)=>(f(),h(e(gt),ue(e(a),{class:e(D)("text-muted-foreground text-sm",t.class)}),{default:v(()=>[C(l.$slots,"default")]),_:3},16,["class"]))}}),Vt=A({__name:"DialogFooter",props:{class:{}},setup(s){const t=s;return(o,a)=>(f(),de("div",{class:R(e(D)("flex flex-row flex-col-reverse justify-end gap-x-2",t.class))},[C(o.$slots,"default")],2))}}),Ft=A({__name:"DialogHeader",props:{class:{}},setup(s){const t=s;return(o,a)=>(f(),de("div",{class:R(e(D)("flex flex-col gap-y-1.5 text-center sm:text-left",t.class))},[C(o.$slots,"default")],2))}}),xe=A({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(s){const t=s,o=z(()=>{const p=t,{class:l}=p;return U(p,["class"])}),a=Ee(o);return(l,i)=>(f(),h(e(bt),ue(e(a),{class:e(D)("text-lg font-semibold leading-none tracking-tight",t.class)}),{default:v(()=>[C(l.$slots,"default")]),_:3},16,["class"]))}});function Rt(s,t,o,a){const l=Ae({offsetX:0,offsetY:0}),i=M(!1),p=c=>{const r=c.clientX,u=c.clientY;if(!s.value)return;const g=s.value.getBoundingClientRect(),{offsetX:k,offsetY:w}=l,T=g.left,$=g.top,Y=g.width,Z=g.height;let S=null;if(a!=null&&a.value){const O=document.querySelector(a.value);O&&(S=O.getBoundingClientRect())}let j,q,H,I;if(S)H=S.left-T+k,j=S.right-T-Y+k,I=S.top-$+w,q=S.bottom-$-Z+w;else{const O=document.documentElement,P=O.clientWidth,x=O.clientHeight;H=-T+k,I=-$+w,j=P-T-Y+k,q=x-$-Z+w}const G=O=>{let P=k+O.clientX-r,x=w+O.clientY-u;P=Math.min(Math.max(P,H),j),x=Math.min(Math.max(x,I),q),l.offsetX=P,l.offsetY=x,s.value&&(s.value.style.transform=`translate(${P}px, ${x}px)`,i.value=!0)},ee=()=>{i.value=!1,document.removeEventListener("mousemove",G),document.removeEventListener("mouseup",ee)};document.addEventListener("mousemove",G),document.addEventListener("mouseup",ee)},B=()=>{const c=ie(t);c&&s.value&&c.addEventListener("mousedown",p)},m=()=>{const c=ie(t);c&&s.value&&c.removeEventListener("mousedown",p)},d=()=>{l.offsetX=0,l.offsetY=0;const c=ie(s);c&&(c.style.transform="none")};return st(()=>{at(()=>{o.value?B():m()})}),nt(()=>{m()}),{dragging:i,resetPosition:d,transform:l}}const Nt=A({__name:"modal",props:{modalApi:{default:void 0},animationType:{},appendToMain:{type:Boolean,default:!1},bordered:{type:Boolean},cancelText:{},centered:{type:Boolean},class:{},closable:{type:Boolean},closeOnClickModal:{type:Boolean},closeOnPressEscape:{type:Boolean},confirmDisabled:{type:Boolean},confirmLoading:{type:Boolean},confirmText:{},contentClass:{},description:{},destroyOnClose:{type:Boolean,default:!1},draggable:{type:Boolean},footer:{type:Boolean},footerClass:{},fullscreen:{type:Boolean},fullscreenButton:{type:Boolean},header:{type:Boolean},headerClass:{},loading:{type:Boolean},modal:{type:Boolean},openAutoFocus:{type:Boolean},overlayBlur:{},showCancelButton:{type:Boolean},showConfirmButton:{type:Boolean},submitting:{type:Boolean},title:{},titleTooltip:{},zIndex:{}},setup(s){var se,be;const t=s,o=Ct.getComponents(),a=M(),l=M(),i=M(),p=M(),B=M(),m=lt();Te("DISMISSABLE_MODAL_ID",m);const{$t:d}=Bt(),{isMobile:c}=kt(),r=(be=(se=t.modalApi)==null?void 0:se.useStore)==null?void 0:be.call(se),{appendToMain:u,bordered:g,cancelText:k,centered:w,class:T,closable:$,closeOnClickModal:Y,closeOnPressEscape:Z,confirmDisabled:S,confirmLoading:j,confirmText:q,contentClass:H,description:I,destroyOnClose:G,draggable:ee,footer:O,footerClass:P,fullscreen:x,fullscreenButton:Se,header:fe,headerClass:Ie,loading:me,modal:Pe,openAutoFocus:Le,overlayBlur:ze,showCancelButton:Ve,showConfirmButton:Fe,submitting:E,title:te,titleTooltip:ye,animationType:Re,zIndex:Ne}=_t(t,r),oe=z(()=>x.value||c.value),he=z(()=>ee.value&&!oe.value&&fe.value),ve=z(()=>u.value?`#${wt}>div:not(.absolute)>div`:void 0),{dragging:Xe,transform:Ye}=Rt(i,p,he,ve),ne=M(!1),le=M(!0);rt(()=>{var n;return(n=r==null?void 0:r.value)==null?void 0:n.isOpen},n=>K(null,null,function*(){if(n){if(le.value=!1,ne.value||(ne.value=!0),yield ce(),!a.value)return;const b=a.value.getContentRef();i.value=b.$el;const{offsetX:N,offsetY:V}=Ye;i.value.style.transform=`translate(${N}px, ${V}px)`}}),{immediate:!0}),it(()=>{var n;u.value||(n=t.modalApi)==null||n.close()});function je(){var n;(n=t.modalApi)==null||n.setState(b=>F(y({},b),{fullscreen:!x.value}))}function qe(n){(!Y.value||E.value)&&(n.preventDefault(),n.stopPropagation())}function He(n){(!Z.value||E.value)&&n.preventDefault()}function Ue(n){Le.value||n==null||n.preventDefault()}function We(n){const b=n.target,N=b==null?void 0:b.dataset.dismissableModal;(!Y.value||N!==m||E.value)&&(n.preventDefault(),n.stopPropagation())}function ge(n){n.preventDefault(),n.stopPropagation()}const Ke=z(()=>!e(G)&&e(ne));function Je(){var n;le.value=!0,(n=t.modalApi)==null||n.onClosed()}return(n,b)=>{var N;return f(),h(e(It),{modal:!1,open:(N=e(r))==null?void 0:N.isOpen,"onUpdate:open":b[3]||(b[3]=()=>{var V;return e(E)||(V=n.modalApi)==null?void 0:V.close()})},{default:v(()=>{var V;return[X(e(zt),{ref_key:"contentRef",ref:a,"append-to":ve.value,class:R(e(D)("left-0 right-0 top-[10vh] mx-auto flex max-h-[80%] w-[520px] flex-col p-0",oe.value?"sm:rounded-none":"sm:rounded-[var(--radius)]",e(T),{"border-border border":e(g),"shadow-3xl":!e(g),"left-0 top-0 size-full max-h-full !translate-x-0 !translate-y-0":oe.value,"top-1/2 !-translate-y-1/2":e(w)&&!oe.value,"duration-300":!e(Xe),hidden:le.value})),"force-mount":Ke.value,modal:e(Pe),open:(V=e(r))==null?void 0:V.isOpen,"show-close":e($),"animation-type":e(Re),"z-index":e(Ne),"overlay-blur":e(ze),"close-class":"top-3",onCloseAutoFocus:ge,onClosed:Je,"close-disabled":e(E),onEscapeKeyDown:He,onFocusOutside:ge,onInteractOutside:qe,onOpenAutoFocus:Ue,onOpened:b[2]||(b[2]=()=>{var L;return(L=n.modalApi)==null?void 0:L.onOpened()}),onPointerDownOutside:We},{default:v(()=>[X(e(Ft),{ref_key:"headerRef",ref:p,class:R(e(D)("px-5 py-4",{"border-b":e(g),hidden:!e(fe),"cursor-move select-none":he.value},e(Ie)))},{default:v(()=>[e(te)?(f(),h(e(xe),{key:0,class:"text-left"},{default:v(()=>[C(n.$slots,"title",{},()=>[J(Q(e(te))+" ",1),e(ye)?C(n.$slots,"titleTooltip",{key:0},()=>[X(e(Ot),{"trigger-class":"pb-1"},{default:v(()=>[J(Q(e(ye)),1)]),_:1})]):_("",!0)])]),_:3})):_("",!0),e(I)?(f(),h(e(Oe),{key:1},{default:v(()=>[C(n.$slots,"description",{},()=>[J(Q(e(I)),1)])]),_:3})):_("",!0),!e(te)||!e(I)?(f(),h(e(xt),{key:2},{default:v(()=>[e(te)?_("",!0):(f(),h(e(xe),{key:0})),e(I)?_("",!0):(f(),h(e(Oe),{key:1}))]),_:1})):_("",!0)]),_:3},8,["class"]),dt("div",{ref_key:"wrapperRef",ref:l,class:R(e(D)("relative min-h-40 flex-1 overflow-y-auto p-3",e(H),{"pointer-events-none":e(me)||e(E)}))},[C(n.$slots,"default")],2),e(me)||e(E)?(f(),h(e(Mt),{key:0,spinning:""})):_("",!0),e(Se)?(f(),h(e(Dt),{key:1,class:"hover:bg-accent hover:text-accent-foreground text-foreground/80 flex-center absolute right-10 top-3 hidden size-6 rounded-full px-1 text-lg opacity-70 transition-opacity hover:opacity-100 focus:outline-none disabled:pointer-events-none sm:block",onClick:je},{default:v(()=>[e(x)?(f(),h(e(Et),{key:0,class:"size-3.5"})):(f(),h(e($t),{key:1,class:"size-3.5"}))]),_:1})):_("",!0),e(O)?(f(),h(e(Vt),{key:2,ref_key:"footerRef",ref:B,class:R(e(D)("flex-row items-center justify-end p-2",{"border-t":e(g)},e(P)))},{default:v(()=>[C(n.$slots,"prepend-footer"),C(n.$slots,"footer",{},()=>[e(Ve)?(f(),h(ke(e(o).DefaultButton||e(we)),{key:0,variant:"ghost",disabled:e(E),onClick:b[0]||(b[0]=()=>{var L;return(L=n.modalApi)==null?void 0:L.onCancel()})},{default:v(()=>[C(n.$slots,"cancelText",{},()=>[J(Q(e(k)||e(d)("cancel")),1)])]),_:3},8,["disabled"])):_("",!0),C(n.$slots,"center-footer"),e(Fe)?(f(),h(ke(e(o).PrimaryButton||e(we)),{key:1,disabled:e(S),loading:e(j)||e(E),onClick:b[1]||(b[1]=()=>{var L;return(L=n.modalApi)==null?void 0:L.onConfirm()})},{default:v(()=>[C(n.$slots,"confirmText",{},()=>[J(Q(e(q)||e(d)("confirm")),1)])]),_:3},8,["disabled","loading"])):_("",!0)]),C(n.$slots,"append-footer")]),_:3},8,["class"])):_("",!0)]),_:3},8,["append-to","class","force-mount","modal","open","show-close","animation-type","z-index","overlay-blur","close-disabled"])]}),_:3},8,["open"])}}});class Xt{constructor(t={}){W(this,"sharedData",{payload:{}});W(this,"store");W(this,"api");W(this,"state");const r=t,{connectedComponent:o,onBeforeClose:a,onCancel:l,onClosed:i,onConfirm:p,onOpenChange:B,onOpened:m}=r,d=U(r,["connectedComponent","onBeforeClose","onCancel","onClosed","onConfirm","onOpenChange","onOpened"]),c={bordered:!0,centered:!1,class:"",closeOnClickModal:!0,closeOnPressEscape:!0,confirmDisabled:!1,confirmLoading:!1,contentClass:"",destroyOnClose:!0,draggable:!1,footer:!0,footerClass:"",fullscreen:!1,fullscreenButton:!0,header:!0,headerClass:"",isOpen:!1,loading:!1,modal:!0,openAutoFocus:!1,showCancelButton:!0,showConfirmButton:!0,title:"",animationType:"slide"};this.store=new At(y(y({},c),d),{onUpdate:()=>{var g,k,w;const u=this.store.state;(u==null?void 0:u.isOpen)===((g=this.state)==null?void 0:g.isOpen)?this.state=u:(this.state=u,(w=(k=this.api).onOpenChange)==null||w.call(k,!!(u!=null&&u.isOpen)))}}),this.state=this.store.state,this.api={onBeforeClose:a,onCancel:l,onClosed:i,onConfirm:p,onOpenChange:B,onOpened:m},ut(this)}close(){return K(this,null,function*(){var o,a,l;((l=yield(a=(o=this.api).onBeforeClose)==null?void 0:a.call(o))!=null?l:!0)&&this.store.setState(i=>F(y({},i),{isOpen:!1,submitting:!1}))})}getData(){var t,o;return(o=(t=this.sharedData)==null?void 0:t.payload)!=null?o:{}}lock(t=!0){return this.setState({submitting:t})}onCancel(){var t,o;this.api.onCancel?(o=(t=this.api).onCancel)==null||o.call(t):this.close()}onClosed(){var t,o;this.state.isOpen||(o=(t=this.api).onClosed)==null||o.call(t)}onConfirm(){var t,o;(o=(t=this.api).onConfirm)==null||o.call(t)}onOpened(){var t,o;this.state.isOpen&&((o=(t=this.api).onOpened)==null||o.call(t))}open(){this.store.setState(t=>F(y({},t),{isOpen:!0}))}setData(t){return this.sharedData.payload=t,this}setState(t){return ct(t)?this.store.setState(t):this.store.setState(o=>y(y({},o),t)),this}unlock(){return this.lock(!1)}}const Me=Symbol("VBEN_MODAL_INJECT"),Yt={};function Wt(s={}){var m;const{connectedComponent:t}=s;if(t){const d=Ae({}),c=M(!0);return[A((u,{attrs:g,slots:k})=>(Te(Me,{extendApi(T){Object.setPrototypeOf(d,T)},options:s,reCreateModal(){return K(this,null,function*(){c.value=!1,yield ce(),c.value=!0})}}),jt(d,y(y(y({},u),g),k)),()=>_e(c.value?t:"div",y(y({},u),g),k)),{name:"VbenParentModal",inheritAttrs:!1}),d]}const o=De(Me,{}),a=y(y(y({},Yt),o.options),s);a.onOpenChange=d=>{var c,r,u;(c=s.onOpenChange)==null||c.call(s,d),(u=(r=o.options)==null?void 0:r.onOpenChange)==null||u.call(r,d)};const l=a.onClosed;a.onClosed=()=>{var d;l==null||l(),a.destroyOnClose&&((d=o.reCreateModal)==null||d.call(o))};const i=new Xt(a),p=i;p.useStore=d=>Tt(i.store,d);const B=A((d,{attrs:c,slots:r})=>()=>_e(Nt,F(y(y({},d),c),{modalApi:p}),r),{name:"VbenModal",inheritAttrs:!1});return(m=o.extendApi)==null||m.call(o,p),[B,p]}function jt(s,t){return K(this,null,function*(){var l;if(!t||Object.keys(t).length===0)return;yield ce();const o=(l=s==null?void 0:s.store)==null?void 0:l.state;if(!o)return;const a=new Set(Object.keys(o));for(const i of Object.keys(t))a.has(i)&&!["class"].includes(i)&&console.warn(`[Vben Modal]: When 'connectedComponent' exists, do not set props or slots '${i}', which will increase complexity. If you need to modify the props of Modal, please use useVbenModal or api.`)})}export{St as X,Wt as u};
